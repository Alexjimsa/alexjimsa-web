---
import HeaderActions from '../ui/HeaderActions.astro';
import { getRelativeLocaleUrl } from 'astro:i18n';

interface Props {
  title: string;
  section: 'blog' | 'projects';   // la página se lo pasa
  class?: string;
  navLabel?: string;
}

const {
  title,
  section,
  class: className = '',
  navLabel = 'Breadcrumb'
} = Astro.props;

const lang = (Astro.currentLocale as 'es' | 'en') ?? 'es';

// Diccionario mínimo (luego lo cambias por tu t())
const LABELS = {
  es: { blog: 'Blog', projects: 'Proyectos' },
  en: { blog: 'Blog', projects: 'Projects' },
} as const;

const parentLabel = LABELS[lang][section];
const parentHref = getRelativeLocaleUrl(lang, section);
---

<header class={`content-header ${className}`}>
  <div class="header-container">
    <nav aria-label={navLabel} class="breadcrumb">
      <a href={parentHref}>{parentLabel}</a>
      <span aria-hidden="true">›</span>
      <span class="current" aria-current="page">{title}</span>
    </nav>
    <HeaderActions variant="desktop"/>
  </div>
</header>

<style>
  .content-header { padding: 2rem; position: relative; }
  .header-container {
    width: 90%;
    max-width: 1100px;
    margin: 0 auto;
    display: flex; justify-content: space-between; align-items: center;
  }
  .breadcrumb { display: flex; gap:.75rem; flex-wrap: wrap; color: var(--color-text_muted); }
  .breadcrumb a { color: inherit; text-decoration: none; }
  .breadcrumb a:hover { color: var(--color-text); text-decoration: underline; text-underline-offset: .2em; }
  .breadcrumb .current { color: var(--color-text); font-weight: 600; }
</style>
